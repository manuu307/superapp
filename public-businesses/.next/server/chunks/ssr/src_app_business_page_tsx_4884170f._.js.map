{"version":3,"sources":["../../../../src/app/business/page.tsx","../../../../src/components/Business.tsx","../../../../src/components/BusinessCatalog.tsx","../../../../src/components/Product.tsx"],"sourcesContent":["\"use client\";\nimport React from 'react';\nimport { BusinessProvider } from '@/context/BusinessContext';\nimport Business from '@/components/Business';\nimport { withProtectedRoute } from '../withProtectedRoute';\n\nconst BusinessPage = () => {\n  return (\n    <BusinessProvider>\n      <Business />\n    </BusinessProvider>\n  );\n};\n\nexport default withProtectedRoute(BusinessPage);\n","\"use client\";\nimport React, { useState, useEffect, useCallback } from 'react';\nimport BusinessCatalog from './BusinessCatalog';\nimport Product from './Product';\n\ninterface BusinessItem {\n  _id: string;\n  name: string;\n  picture?: string;\n}\n\nconst Business = () => {\n  const [businesses, setBusinesses] = useState<BusinessItem[]>([]);\n  const [name, setName] = useState<string>('');\n  const [pictureFile, setPictureFile] = useState<File | null>(null);\n  const [selectedBusiness, setSelectedBusiness] = useState<BusinessItem | null>(null);\n  const [editingBusiness, setEditingBusiness] = useState<BusinessItem | null>(null);\n\n  const fetchBusinesses = useCallback(async () => {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Handle case where token is not available, e.g., redirect to login\n      return;\n    }\n    try {\n      const res = await fetch('/api/business', {\n        headers: { 'x-auth-token': token }\n      });\n      if (!res.ok) {\n        throw new Error('Failed to fetch businesses');\n      }\n      const data: BusinessItem[] = await res.json();\n      setBusinesses(data);\n    } catch (error) {\n      console.error('Error fetching businesses:', error);\n      // Optionally set an error state\n    }\n  }, []);\n\n  useEffect(() => {\n    fetchBusinesses();\n  }, [fetchBusinesses]);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      setPictureFile(e.target.files[0]);\n    }\n  };\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    if (!token) {\n      // Handle case where token is not available\n      return;\n    }\n    let pictureUrl: string = '';\n\n    if (pictureFile) {\n      const formData = new FormData();\n      formData.append('file', pictureFile);\n\n      try {\n        const uploadRes = await fetch('/api/files/upload', {\n          method: 'POST',\n          headers: {\n            'x-auth-token': token\n          },\n          body: formData\n        });\n\n        if (!uploadRes.ok) {\n          throw new Error('File upload failed');\n        }\n\n        const { url } = await uploadRes.json();\n        pictureUrl = url;\n      } catch (err: any) {\n        console.error(err);\n        // Optionally set an error state\n        return; // Stop if file upload fails\n      }\n    }\n\n    try {\n      const response = await fetch('/api/business', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token\n        },\n        body: JSON.stringify({ name, picture: pictureUrl })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to create business');\n      }\n\n      setName('');\n      setPictureFile(null);\n      fetchBusinesses();\n    } catch (err: any) {\n      console.error(err);\n      // Optionally set an error state\n    }\n  };\n\n  const handleUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingBusiness) return;\n\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    let pictureUrl: string | undefined = editingBusiness.picture;\n\n    if (pictureFile) {\n      const formData = new FormData();\n      formData.append('file', pictureFile);\n\n      try {\n        const uploadRes = await fetch('/api/files/upload', {\n          method: 'POST',\n          headers: { 'x-auth-token': token },\n          body: formData\n        });\n\n        if (!uploadRes.ok) throw new Error('File upload failed');\n\n        const { url } = await uploadRes.json();\n        pictureUrl = url;\n      } catch (err) {\n        console.error(err);\n        return;\n      }\n    }\n\n    try {\n      const response = await fetch(`/api/business/${editingBusiness._id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token\n        },\n        body: JSON.stringify({ name, picture: pictureUrl })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to update business');\n      }\n\n      const updatedBusiness = await response.json();\n      setBusinesses(businesses.map(b => b._id === editingBusiness._id ? updatedBusiness : b));\n      setEditingBusiness(null);\n      setName('');\n      setPictureFile(null);\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  const handleEdit = (business: BusinessItem) => {\n    setEditingBusiness(business);\n    setName(business.name);\n    setPictureFile(null);\n  };\n\n  const handleDelete = async (businessId: string) => {\n    if (window.confirm('Are you sure you want to delete this business?')) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        // Handle case where token is not available\n        return;\n      }\n      try {\n        const res = await fetch(`/api/business/${businessId}`, {\n          method: 'DELETE',\n          headers: { 'x-auth-token': token }\n        });\n        if (!res.ok) {\n          throw new Error('Failed to delete business');\n        }\n        setBusinesses(businesses.filter(b => b._id !== businessId));\n      } catch (error) {\n        console.error('Error deleting business:', error);\n        // Optionally set an error state\n      }\n    }\n  };\n\n  if (editingBusiness) {\n    return (\n      <div className=\"p-4 space-y-4 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n        <h2 className=\"text-2xl font-bold\">Edit Business</h2>\n        <form onSubmit={handleUpdate} className=\"space-y-4\">\n          <input\n            type=\"text\"\n            placeholder=\"Business Name\"\n            value={name}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}\n            required\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <div>\n            <label className=\"block mb-2 text-sm font-bold text-gray-700 dark:text-gray-300\" htmlFor=\"business-picture\">\n              Business Picture\n            </label>\n            <input\n              id=\"business-picture\"\n              type=\"file\"\n              onChange={handleFileChange}\n              className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n            />\n          </div>\n          <div className=\"flex space-x-4\">\n            <button type=\"submit\" className=\"w-full px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">Save</button>\n            <button type=\"button\" onClick={() => setEditingBusiness(null)} className=\"w-full px-4 py-2 font-bold text-white bg-gray-500 rounded-md hover:bg-gray-700\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n\n  if (selectedBusiness) {\n    return (\n      <div className=\"p-4 space-y-4 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n        <button onClick={() => setSelectedBusiness(null)} className=\"px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">Back to Businesses</button>\n        <div className=\"flex items-center space-x-4\">\n          <img src={selectedBusiness.picture || 'https://via.placeholder.com/150'} alt={selectedBusiness.name} className=\"w-24 h-24 rounded-full\" />\n          <h2 className=\"text-2xl font-bold\">{selectedBusiness.name}</h2>\n        </div>\n        <div className=\"grid grid-cols-1 gap-4 md:grid-cols-2\">\n          <Product businessId={selectedBusiness._id} />\n          <BusinessCatalog businessId={selectedBusiness._id} />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 space-y-4 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n      <h2 className=\"text-2xl font-bold\">My Businesses</h2>\n      <form onSubmit={onSubmit} className=\"space-y-4\">\n        <input\n          type=\"text\"\n          placeholder=\"Business Name\"\n          value={name}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <div>\n          <label className=\"block mb-2 text-sm font-bold text-gray-700 dark:text-gray-300\" htmlFor=\"business-picture\">\n            Business Picture\n          </label>\n          <input\n            id=\"business-picture\"\n            type=\"file\"\n            onChange={handleFileChange}\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n        </div>\n        <button type=\"submit\" className=\"w-full px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">Create Business</button>\n      </form>\n      <ul className=\"space-y-2\">\n        {businesses.map((business: BusinessItem) => (\n          <li key={business._id} className=\"flex items-center justify-between p-2 space-x-4 bg-gray-200 rounded-md dark:bg-gray-700\">\n            <div onClick={() => setSelectedBusiness(business)} className=\"flex items-center flex-grow space-x-4 cursor-pointer\">\n              <img src={business.picture || 'https://via.placeholder.com/50'} alt={business.name} className=\"w-12 h-12 rounded-full\" />\n              <span>{business.name}</span>\n            </div>\n            <div>\n              <button onClick={(e) => { e.stopPropagation(); handleEdit(business); }} className=\"px-3 py-1 mr-2 text-white bg-blue-500 rounded-md hover:bg-blue-700\">Edit</button>\n              <button onClick={(e) => { e.stopPropagation(); handleDelete(business._id); }} className=\"px-3 py-1 text-white bg-red-500 rounded-md hover:bg-red-700\">Delete</button>\n            </div>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default Business;","\"use client\";\nimport React, { useState, useEffect } from 'react';\n\ninterface ProductItem {\n  _id: string;\n  name: string;\n  short_description: string;\n  description: string;\n  picture: string;\n  price_before: number;\n  price_after: number;\n  business: string;\n}\n\ninterface BusinessCatalogProps {\n  businessId: string;\n}\n\nconst BusinessCatalog = ({ businessId }: BusinessCatalogProps) => {\n  const [products, setProducts] = useState<ProductItem[]>([]);\n  const [selectedItem, setSelectedItem] = useState<ProductItem | null>(null);\n  const [editingProduct, setEditingProduct] = useState<ProductItem | null>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchProducts = async () => {\n      try {\n        const token = localStorage.getItem('token');\n        const response = await fetch(`/api/products/${businessId}`, {\n          headers: {\n            'x-auth-token': token || '',\n          },\n        });\n        if (!response.ok) {\n          throw new Error('Failed to fetch products');\n        }\n        const data = await response.json();\n        setProducts(data);\n      } catch (err: any) {\n        setError(err.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    if (businessId) {\n      fetchProducts();\n    }\n  }, [businessId]);\n\n  const openItemView = (item: ProductItem) => {\n    setSelectedItem(item);\n  };\n\n  const closeItemView = () => {\n    setSelectedItem(null);\n  };\n\n  const handleEdit = (product: ProductItem) => {\n    setSelectedItem(null);\n    setEditingProduct(product);\n  };\n\n  const handleDelete = async (productId: string) => {\n    if (window.confirm('Are you sure you want to delete this product?')) {\n      const token = localStorage.getItem('token');\n      if (!token) return;\n      try {\n        const res = await fetch(`/api/products/${productId}`, {\n          method: 'DELETE',\n          headers: { 'x-auth-token': token }\n        });\n        if (!res.ok) {\n          throw new Error('Failed to delete product');\n        }\n        setProducts(products.filter(p => p._id !== productId));\n        setSelectedItem(null);\n      } catch (error) {\n        console.error('Error deleting product:', error);\n      }\n    }\n  };\n\n  const handleUpdate = async (e: React.FormEvent<HTMLFormElement>, product: ProductItem) => {\n    e.preventDefault();\n    const token = localStorage.getItem('token');\n    if (!token) return;\n\n    const formData = new FormData(e.currentTarget);\n    const name = formData.get('name') as string;\n    const short_description = formData.get('short_description') as string;\n    const description = formData.get('description') as string;\n    const price_before = parseFloat(formData.get('price_before') as string);\n    const price_after = parseFloat(formData.get('price_after') as string);\n    const pictureFile = (e.currentTarget.elements.namedItem('picture') as HTMLInputElement).files?.[0];\n\n    let picture = product.picture;\n\n    if (pictureFile) {\n      const uploadFormData = new FormData();\n      uploadFormData.append('file', pictureFile);\n      try {\n        const uploadRes = await fetch('/api/files/upload', {\n          method: 'POST',\n          headers: { 'x-auth-token': token },\n          body: uploadFormData,\n        });\n        if (!uploadRes.ok) throw new Error('File upload failed');\n        const { url } = await uploadRes.json();\n        picture = url;\n      } catch (err) {\n        console.error(err);\n        return;\n      }\n    }\n\n    const updatedProductData = { name, short_description, description, price_before, price_after, picture };\n\n    try {\n      const res = await fetch(`/api/products/${product._id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token,\n        },\n        body: JSON.stringify(updatedProductData),\n      });\n      if (!res.ok) throw new Error('Failed to update product');\n      const updatedProduct = await res.json();\n      setProducts(products.map(p => p._id === product._id ? updatedProduct : p));\n      setEditingProduct(null);\n    } catch (error) {\n      console.error('Error updating product:', error);\n    }\n  };\n\n  if (loading) {\n    return <div>Loading catalog...</div>;\n  }\n\n  if (error) {\n    return <div>Error: {error}</div>;\n  }\n\n  if (products.length === 0) {\n    return <div>No products in catalog.</div>;\n  }\n\n  return (\n    <div className=\"p-4 space-y-4 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n      <h2 className=\"text-2xl font-bold\">Business Catalog</h2>\n      <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4\">\n        {products.map((item) => (\n          <div key={item._id} onClick={() => openItemView(item)} className=\"p-4 space-y-2 bg-gray-200 rounded-lg shadow-md cursor-pointer dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600\">\n            <h4 className=\"text-lg font-bold\">{item.name}</h4>\n            <img src={item.picture} alt={item.name} className=\"w-full rounded-md\" />\n            <p>{item.short_description}</p>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm text-gray-500 line-through\">${item.price_before}</span>\n              <span className=\"text-lg font-bold text-green-600\">${item.price_after}</span>\n            </div>\n          </div>\n        ))}\n      </div>\n\n      {selectedItem && (\n        <div className=\"fixed top-0 left-0 flex items-center justify-center w-full h-full bg-black bg-opacity-80\" onClick={closeItemView}>\n          <div className=\"p-8 m-4 space-y-4 overflow-auto bg-white rounded-lg shadow-md max-w-3xl max-h-3/4 dark:bg-gray-800\">\n            <h2 className=\"text-3xl font-bold\">{selectedItem.name}</h2>\n            <img src={selectedItem.picture} alt={selectedItem.name} className=\"w-full rounded-md\" />\n            <p className=\"text-lg\">{selectedItem.short_description}</p>\n            <p>{selectedItem.description}</p>\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-lg text-gray-500 line-through\">${selectedItem.price_before}</span>\n              <span className=\"text-2xl font-bold text-green-600\">${selectedItem.price_after}</span>\n            </div>\n            <div className=\"flex justify-end space-x-4\">\n              <button onClick={(e) => { e.stopPropagation(); handleEdit(selectedItem); }} className=\"px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">Edit</button>\n              <button onClick={(e) => { e.stopPropagation(); handleDelete(selectedItem._id); }} className=\"px-4 py-2 font-bold text-white bg-red-500 rounded-md hover:bg-red-700\">Delete</button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {editingProduct && (\n        <div className=\"fixed top-0 left-0 flex items-center justify-center w-full h-full bg-black bg-opacity-80\">\n          <div className=\"p-8 m-4 space-y-4 overflow-auto bg-white rounded-lg shadow-md max-w-3xl max-h-3/4 dark:bg-gray-800\">\n            <h2 className=\"text-3xl font-bold\">Edit Product</h2>\n            <form onSubmit={(e) => handleUpdate(e, editingProduct)} className=\"space-y-4\">\n              <input type=\"text\" name=\"name\" defaultValue={editingProduct.name} className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\" />\n              <input type=\"text\" name=\"short_description\" defaultValue={editingProduct.short_description} className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\" />\n              <textarea name=\"description\" defaultValue={editingProduct.description} className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\" />\n              <input type=\"number\" name=\"price_before\" defaultValue={editingProduct.price_before} className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\" />\n              <input type=\"number\" name=\"price_after\" defaultValue={editingProduct.price_after} className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\" />\n              <input type=\"file\" name=\"picture\" className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\" />\n              <div className=\"flex space-x-4\">\n                <button type=\"submit\" className=\"w-full px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">Save</button>\n                <button type=\"button\" onClick={() => setEditingProduct(null)} className=\"w-full px-4 py-2 font-bold text-white bg-gray-500 rounded-md hover:bg-gray-700\">Cancel</button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BusinessCatalog;","\"use client\";\nimport React, { useState, useEffect, useCallback } from 'react';\n\ninterface ProductItem {\n  _id: string;\n  name: string;\n  short_description: string;\n  description: string;\n  picture: string;\n  price_before: number;\n  price_after: number;\n  businessId: string;\n}\n\ninterface ProductProps {\n  businessId: string;\n}\n\nconst Product: React.FC<ProductProps> = ({ businessId }) => {\n  const [products, setProducts] = useState<ProductItem[]>([]);\n  const [name, setName] = useState<string>('');\n  const [shortDescription, setShortDescription] = useState<string>('');\n  const [description, setDescription] = useState<string>('');\n  const [pictureFile, setPictureFile] = useState<File | null>(null);\n  const [price_before, setPriceBefore] = useState<string>('');\n  const [price_after, setPriceAfter] = useState<string>('');\n  const [error, setError] = useState<string>('');\n  const [editingProduct, setEditingProduct] = useState<ProductItem | null>(null);\n\n  const fetchProducts = useCallback(async () => {\n    try {\n      const res = await fetch(`/api/products/${businessId}`);\n      if (!res.ok) {\n        throw new Error('Failed to fetch products');\n      }\n      const data: ProductItem[] = await res.json();\n      setProducts(data);\n    } catch (err: any) {\n      console.error(err);\n      setError(err.message || 'Failed to fetch products.');\n    }\n  }, [businessId]);\n\n  useEffect(() => {\n    if (businessId) {\n      fetchProducts();\n    }\n  }, [businessId, fetchProducts]);\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files && e.target.files.length > 0) {\n      setPictureFile(e.target.files[0]);\n    }\n  };\n\n  const handleEdit = (product: ProductItem) => {\n    setEditingProduct(product);\n    setName(product.name);\n    setShortDescription(product.short_description);\n    setDescription(product.description);\n    setPriceBefore(product.price_before.toString());\n    setPriceAfter(product.price_after.toString());\n    setPictureFile(null);\n  };\n\n  const handleDelete = async (productId: string) => {\n    if (window.confirm('Are you sure you want to delete this product?')) {\n      const token = localStorage.getItem('token');\n      if (!token) {\n        setError('Authentication token not found. Please log in.');\n        return;\n      }\n      try {\n        const res = await fetch(`/api/products/${productId}`, {\n          method: 'DELETE',\n          headers: { 'x-auth-token': token }\n        });\n        if (!res.ok) {\n          throw new Error('Failed to delete product');\n        }\n        setProducts(products.filter(p => p._id !== productId));\n      } catch (error: any) {\n        console.error('Error deleting product:', error);\n        setError(error.message || 'Failed to delete product.');\n      }\n    }\n  };\n\n  const handleUpdate = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingProduct) return;\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setError('Authentication token not found. Please log in.');\n      return;\n    }\n\n    let pictureUrl: string | undefined = editingProduct.picture;\n\n    if (pictureFile) {\n      const formData = new FormData();\n      formData.append('file', pictureFile);\n\n      try {\n        const uploadRes = await fetch('/api/files/upload', {\n          method: 'POST',\n          headers: { 'x-auth-token': token },\n          body: formData\n        });\n\n        if (!uploadRes.ok) throw new Error('File upload failed');\n\n        const { url } = await uploadRes.json();\n        pictureUrl = url;\n      } catch (err) {\n        console.error(err);\n        setError('File upload failed.');\n        return;\n      }\n    }\n\n    try {\n      const response = await fetch(`/api/products/${editingProduct._id}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token\n        },\n        body: JSON.stringify({\n          name,\n          short_description: shortDescription,\n          description,\n          picture: pictureUrl,\n          price_before: parseFloat(price_before),\n          price_after: parseFloat(price_after)\n        })\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.message || 'Failed to update product');\n      }\n\n      const updatedProduct = await response.json();\n      setProducts(products.map(p => p._id === editingProduct._id ? updatedProduct : p));\n      setEditingProduct(null);\n      setName('');\n      setShortDescription('');\n      setDescription('');\n      setPriceBefore('');\n      setPriceAfter('');\n      setPictureFile(null);\n    } catch (err: any) {\n      console.error(err);\n      setError(err.message || 'Failed to update product.');\n    }\n  };\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError('');\n\n    if (!name || !shortDescription || !description || !pictureFile || !price_before || !price_after) {\n      setError('Please fill in all required fields.');\n      return;\n    }\n\n    const token = localStorage.getItem('token');\n    if (!token) {\n      setError('Authentication token not found. Please log in.');\n      return;\n    }\n\n    let pictureUrl = '';\n\n    if (pictureFile) {\n      const formData = new FormData();\n      formData.append('file', pictureFile);\n\n      try {\n        const uploadRes = await fetch('/api/files/upload', {\n          method: 'POST',\n          headers: {\n            'x-auth-token': token,\n          },\n          body: formData,\n        });\n\n        if (!uploadRes.ok) {\n          throw new Error('File upload failed');\n        }\n\n        const { url } = await uploadRes.json();\n        pictureUrl = url;\n      } catch (err: any) {\n        console.error(err);\n        setError(err.message || 'File upload failed. Please try again.');\n        return;\n      }\n    }\n\n    try {\n      const response = await fetch('/api/products', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'x-auth-token': token,\n        },\n        body: JSON.stringify({\n          name,\n          short_description: shortDescription,\n          description,\n          picture: pictureUrl,\n          price_before: parseFloat(price_before),\n          price_after: parseFloat(price_after),\n          businessId,\n        }),\n      });\n\n      if (!response.ok) {\n        const data = await response.json();\n        throw new Error(data.message || 'Failed to create product.');\n      }\n\n      setName('');\n      setShortDescription('');\n      setDescription('');\n      setPictureFile(null);\n      setPriceBefore('');\n      setPriceAfter('');\n      fetchProducts();\n    } catch (err: any) {\n      console.error(err);\n      setError(err.message || 'An error occurred while creating the product.');\n    }\n  };\n\n  if (editingProduct) {\n    return (\n      <div className=\"p-4 space-y-4 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n        <h3 className=\"text-xl font-bold\">Edit Product</h3>\n        <form onSubmit={handleUpdate} className=\"space-y-4\">\n          {error && <p className=\"text-red-500 text-center\">{error}</p>}\n          <input\n            type=\"text\"\n            placeholder=\"Name\"\n            value={name}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}\n            required\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Short Description\"\n            value={shortDescription}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setShortDescription(e.target.value)}\n            required\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <input\n            type=\"text\"\n            placeholder=\"Description\"\n            value={description}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setDescription(e.target.value)}\n            required\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <input\n            type=\"file\"\n            onChange={handleFileChange}\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <input\n            type=\"number\"\n            placeholder=\"Price Before\"\n            value={price_before}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPriceBefore(e.target.value)}\n            required\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <input\n            type=\"number\"\n            placeholder=\"Price After\"\n            value={price_after}\n            onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPriceAfter(e.target.value)}\n            required\n            className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n          />\n          <div className=\"flex space-x-4\">\n            <button type=\"submit\" className=\"w-full px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">Save</button>\n            <button type=\"button\" onClick={() => setEditingProduct(null)} className=\"w-full px-4 py-2 font-bold text-white bg-gray-500 rounded-md hover:bg-gray-700\">Cancel</button>\n          </div>\n        </form>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"p-4 space-y-4 bg-white rounded-lg shadow-md dark:bg-gray-800\">\n      <h3 className=\"text-xl font-bold\">Create Product</h3>\n      <form onSubmit={onSubmit} className=\"space-y-4\">\n        {error && <p className=\"text-red-500 text-center\">{error}</p>}\n        <input\n          type=\"text\"\n          placeholder=\"Name\"\n          value={name}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setName(e.target.value)}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Short Description\"\n          value={shortDescription}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setShortDescription(e.target.value)}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <input\n          type=\"text\"\n          placeholder=\"Description\"\n          value={description}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setDescription(e.target.value)}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <input\n          type=\"file\"\n          onChange={handleFileChange}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <input\n          type=\"number\"\n          placeholder=\"Price Before\"\n          value={price_before}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPriceBefore(e.target.value)}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <input\n          type=\"number\"\n          placeholder=\"Price After\"\n          value={price_after}\n          onChange={(e: React.ChangeEvent<HTMLInputElement>) => setPriceAfter(e.target.value)}\n          required\n          className=\"w-full px-4 py-2 bg-gray-200 border border-transparent rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700\"\n        />\n        <button type=\"submit\" className=\"w-full px-4 py-2 font-bold text-white bg-blue-500 rounded-md hover:bg-blue-700\">\n          Create Product\n        </button>\n      </form>\n      <div>\n        <h3 className=\"text-xl font-bold\">Products</h3>\n        <ul className=\"space-y-2\">\n          {products.map((product: ProductItem) => (\n            <li key={product._id} className=\"flex items-center justify-between p-2 space-x-4 bg-gray-200 rounded-md dark:bg-gray-700\">\n              <div className=\"flex items-center flex-grow space-x-4\">\n                <img src={product.picture || 'https://via.placeholder.com/50'} alt={product.name} className=\"w-12 h-12 rounded-full\" />\n                <span>{product.name}</span>\n              </div>\n              <div>\n                <button onClick={() => handleEdit(product)} className=\"px-3 py-1 mr-2 text-white bg-blue-500 rounded-md hover:bg-blue-700\">Edit</button>\n                <button onClick={() => handleDelete(product._id)} className=\"px-3 py-1 text-white bg-red-500 rounded-md hover:bg-red-700\">Delete</button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default Product;"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OCDA,EAAA,EAAA,CAAA,CAAA,aCiBwB,CAAC,YAAE,CAAU,CAAwB,IAC3D,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,AA6LnB,EA7LmB,QAAA,AAAQ,EAAgB,EAAE,EACpD,CAAC,EAAc,EAAgB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAC/D,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MACnE,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAC1C,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAwB,MAElD,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAgB,UACpB,GAAI,CACF,IAAM,EAAQ,aAAa,OAAO,CAAC,SAC7B,EAAW,MAAM,MAAM,CAAC,cAAc,EAAE,EAAA,CAAY,CAAE,CAC1D,QAAS,CACP,eAAgB,GAAS,EAC3B,CACF,GACA,GAAI,CAAC,EAAS,EAAE,CACd,CADgB,KACN,AAAJ,MAAU,4BAElB,IAAM,EAAO,MAAM,EAAS,IAAI,GAChC,EAAY,EACd,CAAE,MAAO,EAAU,CACjB,EAAS,EAAI,OAAO,CACtB,QAAU,CACR,GAAW,EACb,CACF,EAEI,GACF,GAEJ,EAAG,CAAC,EAAW,CAHG,CAkBlB,IAAM,EAAe,MAAO,IAC1B,GAAI,OAAO,OAAO,CAAC,iDAAkD,CACnE,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAK,CAAD,CACJ,GAAI,CAKF,CANU,EAMN,CAAC,CAJO,MAAM,MAAM,CAAC,cAAc,EAAE,EAAA,CAAW,CAAE,CACpD,OAAQ,SACR,QAAS,CAAE,eAAgB,CAAM,CACnC,EAAA,EACS,EAAE,CACT,CADW,KACL,AAAI,MAAM,4BAElB,EAAY,EAAS,MAAM,CAAC,GAAK,EAAE,GAAG,GAAK,IAC3C,EAAgB,KAClB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,0BAA2B,EAC3C,CACF,CACF,EAEM,EAAe,MAAO,EAAqC,KAC/D,EAAE,cAAc,GAChB,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CAAC,EAAO,OAEZ,IAAM,EAAW,IAAI,SAAS,EAAE,aAAa,EACvC,EAAO,EAAS,GAAG,CAAC,QACpB,EAAoB,EAAS,GAAG,CAAC,qBACjC,EAAc,EAAS,GAAG,CAAC,eAC3B,EAAe,WAAW,EAAS,GAAG,CAAC,iBACvC,EAAc,WAAW,EAAS,GAAG,CAAC,gBACtC,EAAe,EAAE,aAAa,CAAC,QAAQ,CAAC,SAAS,CAAC,WAAgC,KAAK,EAAE,CAAC,EAAE,CAE9F,EAAU,EAAQ,OAAO,CAE7B,GAAI,EAAa,CACf,IAAM,EAAiB,IAAI,SAC3B,EAAe,MAAM,CAAC,OAAQ,GAC9B,GAAI,CACF,IAAM,EAAY,MAAM,MAAM,oBAAqB,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,CAAM,EACjC,KAAM,CACR,GACA,GAAI,CAAC,EAAU,EAAE,CAAE,MAAM,AAAI,MAAM,sBACnC,GAAM,KAAE,CAAG,CAAE,CAAG,MAAM,EAAU,IAAI,GACpC,EAAU,CACZ,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,GACd,MACF,CACF,CAEA,IAAM,EAAqB,MAAE,EAAM,gCAAmB,eAAa,cAAc,UAAa,CAAQ,EAEtG,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAC,cAAc,EAAE,EAAQ,GAAG,CAAA,CAAE,CAAE,CACtD,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,eAAgB,CAClB,EACA,KAAM,KAAK,SAAS,CAAC,EACvB,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,MAAU,AAAJ,MAAU,4BAC7B,IAAM,EAAiB,MAAM,EAAI,IAAI,GACrC,EAAY,EAAS,GAAG,CAAC,GAAK,EAAE,GAAG,GAAK,EAAQ,GAAG,CAAG,EAAiB,IACvE,EAAkB,KACpB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,0BAA2B,EAC3C,CACF,SAEA,AAAI,EACK,CAAA,EAAA,EAAA,EADI,CACJ,EAAC,MAAA,UAAI,uBAGV,EACK,CAAA,EAAA,EADE,AACF,IAAA,EAAC,MAAA,WAAI,UAAQ,KAGE,GAAG,CAAvB,EAAS,MAAM,CACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,UAAI,4BAIZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,qBACnC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+EACZ,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAmB,QAAS,IAAM,CAtGzC,EAsGsD,IAAO,UAtG7C,AAsGuD,oIAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAqB,EAAK,IAAI,GAC5C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAK,OAAO,CAAE,IAAK,EAAK,IAAI,CAAE,UAAU,sBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,EAAK,iBAAiB,GAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,+CAAqC,IAAE,EAAK,YAAY,IACxE,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,6CAAmC,IAAE,EAAK,WAAW,SAN/D,EAAK,GAAG,KAYrB,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2FAA2F,QAhH1F,CAgHmG,IA/GvH,EAAgB,KAClB,WA+GQ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+GACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAsB,EAAa,IAAI,GACrD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAa,OAAO,CAAE,IAAK,EAAa,IAAI,CAAE,UAAU,sBAClE,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAa,iBAAiB,GACtD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAG,EAAa,WAAW,GAC5B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,+CAAqC,IAAE,EAAa,YAAY,IAChF,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,UAAU,8CAAoC,IAAE,EAAa,WAAW,OAEhF,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,AAAC,IAAQ,EAAE,eAAe,GAtHrD,EAAgB,MAChB,EAqHoE,EAAe,EAAG,UAAU,EArH9E,iFAqHwJ,SAChK,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,AAAC,IAAQ,EAAE,eAAe,GAAI,EAAa,EAAa,GAAG,CAAG,EAAG,UAAU,iFAAwE,mBAM3K,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oGACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,+GACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,iBACnC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,AAAC,GAAM,EAAa,EAAG,GAAiB,UAAU,sBAChE,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,KAAK,OAAO,aAAc,EAAe,IAAI,CAAE,UAAU,2IAC5E,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,KAAK,oBAAoB,aAAc,EAAe,iBAAiB,CAAE,UAAU,2IACtG,CAAA,EAAA,EAAA,GAAA,EAAC,WAAA,CAAS,KAAK,cAAc,aAAc,EAAe,WAAW,CAAE,UAAU,2IACjF,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,KAAK,eAAe,aAAc,EAAe,YAAY,CAAE,UAAU,2IAC9F,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,SAAS,KAAK,cAAc,aAAc,EAAe,WAAW,CAAE,UAAU,2IAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,KAAK,OAAO,KAAK,UAAU,UAAU,2IAC5C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,0FAAiF,SACjH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,QAAS,IAAM,EAAkB,MAAO,UAAU,0FAAiF,wBAQzK,IC5LwC,CAAC,YAAE,CAAU,CAAE,IACrD,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,CAmWnB,CAnWmB,QAAA,AAAQ,EAAgB,EAAE,EACpD,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACnC,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAC3D,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACjD,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACtD,CAAC,EAAc,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAClD,CAAC,EAAa,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IAChD,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACrC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAqB,MAEnE,EAAgB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAChC,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAC,cAAc,EAAE,EAAA,CAAY,EACrD,GAAI,CAAC,EAAI,EAAE,CACT,CADW,KACL,AAAI,MAAM,4BAElB,IAAM,EAAsB,MAAM,EAAI,IAAI,GAC1C,EAAY,EACd,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GACd,EAAS,EAAI,OAAO,EAAI,4BAC1B,CACF,EAAG,CAAC,EAAW,EAEf,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACJ,GACF,GAEJ,EAAG,CAAC,EAAY,CAHE,CAGY,EAE9B,IAAM,EAAoB,AAAD,IACnB,EAAE,MAAM,CAAC,KAAK,EAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAG,GAAG,AAC/C,EAAe,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CAEpC,EAYM,EAAe,MAAO,IAC1B,GAAI,OAAO,OAAO,CAAC,iDAAkD,CACnE,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CAAC,EAAO,YACV,EAAS,kDAGX,GAAI,CAKF,GAAI,CAAC,CAJO,MAAM,MAAM,CAAC,cAAc,EAAE,EAAA,CAAW,CAAE,CACpD,OAAQ,SACR,QAAS,CAAE,eAAgB,CAAM,CACnC,EAAA,EACS,EAAE,CACT,CADW,KACL,AAAI,MAAM,4BAElB,EAAY,EAAS,MAAM,CAAC,GAAK,EAAE,GAAG,GAAK,GAC7C,CAAE,MAAO,EAAY,CACnB,QAAQ,KAAK,CAAC,0BAA2B,GACzC,EAAS,EAAM,OAAO,EAAI,4BAC5B,CACF,CACF,EAEM,EAAe,MAAO,IAE1B,GADA,EAAE,cAAc,GACZ,CAAC,EAAgB,OAErB,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CAAC,EAAO,YACV,EAAS,kDAIX,IAAI,EAAiC,EAAe,OAAO,CAE3D,GAAI,EAAa,CACf,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,OAAQ,GAExB,GAAI,CACF,IAAM,EAAY,MAAM,MAAM,oBAAqB,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,CAAM,EACjC,KAAM,CACR,GAEA,GAAI,CAAC,EAAU,EAAE,CAAE,MAAM,AAAI,MAAM,sBAEnC,GAAM,KAAE,CAAG,CAAE,CAAG,MAAM,EAAU,IAAI,GACpC,EAAa,CACf,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,GACd,EAAS,uBACT,MACF,CACF,CAEA,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,CAAC,cAAc,EAAE,EAAe,GAAG,CAAA,CAAE,CAAE,CAClE,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,eAAgB,CAClB,EACA,KAAM,KAAK,SAAS,CAAC,MACnB,EACA,kBAAmB,cACnB,EACA,QAAS,EACT,aAAc,WAAW,GACzB,YAAa,WAAW,EAC1B,EACF,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,EAAU,OAAO,EAAI,2BACvC,CAEA,IAAM,EAAiB,MAAM,EAAS,IAAI,GAC1C,EAAY,EAAS,GAAG,CAAC,GAAK,EAAE,GAAG,GAAK,EAAe,GAAG,CAAG,EAAiB,IAC9E,EAAkB,MAClB,EAAQ,IACR,EAAoB,IACpB,EAAe,IACf,EAAe,IACf,EAAc,IACd,EAAe,KACjB,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GACd,EAAS,EAAI,OAAO,EAAI,4BAC1B,CACF,EAEM,EAAW,MAAO,IAItB,GAHA,EAAE,cAAc,GAChB,EAAS,IAEL,CAAC,GAAQ,CAAC,GAAoB,CAAC,GAAe,CAAC,GAAe,CAAC,GAAgB,CAAC,EAAa,YAC/F,EAAS,uCAIX,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CAAC,EAAO,YACV,EAAS,kDAIX,IAAI,EAAa,GAEjB,GAAI,EAAa,CACf,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,OAAQ,GAExB,GAAI,CACF,IAAM,EAAY,MAAM,MAAM,oBAAqB,CACjD,OAAQ,OACR,QAAS,CACP,eAAgB,CAClB,EACA,KAAM,CACR,GAEA,GAAI,CAAC,EAAU,EAAE,CACf,CADiB,KACP,AAAJ,MAAU,sBAGlB,GAAM,KAAE,CAAG,CAAE,CAAG,MAAM,EAAU,IAAI,GACpC,EAAa,CACf,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GACd,EAAS,EAAI,OAAO,EAAI,yCACxB,MACF,CACF,CAEA,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,gBAAiB,CAC5C,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,eAAgB,CAClB,EACA,KAAM,KAAK,SAAS,CAAC,MACnB,EACA,kBAAmB,cACnB,EACA,QAAS,EACT,aAAc,WAAW,GACzB,YAAa,WAAW,GACxB,YACF,EACF,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAO,MAAM,EAAS,IAAI,EAChC,OAAM,AAAI,MAAM,EAAK,OAAO,EAAI,4BAClC,CAEA,EAAQ,IACR,EAAoB,IACpB,EAAe,IACf,EAAe,MACf,EAAe,IACf,EAAc,IACd,GACF,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GACd,EAAS,EAAI,OAAO,EAAI,gDAC1B,CACF,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,IAAA,EAAC,GAFe,GAEf,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAoB,iBAClC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBACrC,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA4B,IACnD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,OACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAQ,EAAE,MAAM,CAAC,KAAK,EAC5E,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAoB,EAAE,MAAM,CAAC,KAAK,EACxF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,cACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAe,EAAE,MAAM,CAAC,KAAK,EACnF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,SAAU,EACV,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,YAAY,eACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAe,EAAE,MAAM,CAAC,KAAK,EACnF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,YAAY,cACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAc,EAAE,MAAM,CAAC,KAAK,EAClF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,0FAAiF,SACjH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,QAAS,IAAM,EAAkB,MAAO,UAAU,0FAAiF,oBAQjK,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAoB,mBAClC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAU,UAAU,sBACjC,GAAS,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,oCAA4B,IACnD,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,OACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAQ,EAAE,MAAM,CAAC,KAAK,EAC5E,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,oBACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAoB,EAAE,MAAM,CAAC,KAAK,EACxF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,cACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAe,EAAE,MAAM,CAAC,KAAK,EACnF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,SAAU,EACV,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,YAAY,eACZ,MAAO,EACP,SAAW,AAAD,GAA4C,EAAe,EAAE,MAAM,CAAC,KAAK,EACnF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,SACL,YAAY,cACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAc,EAAE,MAAM,CAAC,KAAK,EAClF,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,0FAAiF,sBAInH,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6BAAoB,aAClC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACX,EAAS,GAAG,CAAC,AAAC,GACb,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAqB,UAAU,oGAC9B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAQ,OAAO,EAAI,iCAAkC,IAAK,EAAQ,IAAI,CAAE,UAAU,2BAC5F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAQ,IAAI,MAErB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,CAnTnC,KACA,EAAQ,AAkTsC,EAlT9B,IAAI,EACpB,EAAoB,CAFF,CAEU,iBAAiB,EAC7C,EAAe,EAAQ,WAAW,EAClC,EAAe,EAAQ,YAAY,CAAC,QAAQ,IAC5C,EAAc,EAAQ,WAAW,CAAC,QAAQ,IAC1C,EAAe,OA6SyC,UAAU,8EAAqE,SAC3H,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,EAAa,EAAQ,GAAG,EAAG,UAAU,uEAA8D,gBAPrH,EAAQ,GAAG,UAehC,IFzWiB,KACf,GAAM,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,EAAE,CAgRlD,CA/QP,CAAC,EAAM,EAAQ,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,IACnC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAc,MACtD,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsB,MACxE,CAAC,EAAiB,EAAmB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAsB,MAEtE,EAAkB,CAAA,EAAA,EAAA,WAAA,AAAW,EAAC,UAClC,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAK,CAAD,CAIJ,GAAI,CACF,CALU,GAKJ,EAAM,MAAM,MAAM,gBAAiB,CACvC,QAAS,CAAE,eAAgB,CAAM,CACnC,GACA,GAAI,CAAC,EAAI,EAAE,CACT,CADW,KACL,AAAI,MAAM,8BAElB,IAAM,EAAuB,MAAM,EAAI,IAAI,GAC3C,EAAc,EAChB,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,6BAA8B,EAE9C,CACF,EAAG,EAAE,EAEL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GACF,EAAG,CAAC,EAAgB,EAEpB,IAAM,EAAmB,AAAC,IACpB,EAAE,MAAM,CAAC,KAAK,EAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,CAAG,GAAG,AAC/C,EAAe,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE,CAEpC,EAEM,EAAW,MAAO,IACtB,EAAE,cAAc,GAChB,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CAAC,EAEH,KAFU,EAIZ,IAAI,EAAqB,GAEzB,GAAI,EAAa,CACf,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,OAAQ,GAExB,GAAI,CACF,IAAM,EAAY,MAAM,MAAM,oBAAqB,CACjD,OAAQ,OACR,QAAS,CACP,eAAgB,CAClB,EACA,KAAM,CACR,GAEA,GAAI,CAAC,EAAU,EAAE,CACf,CADiB,KACP,AAAJ,MAAU,sBAGlB,GAAM,CAAE,KAAG,CAAE,CAAG,MAAM,EAAU,IAAI,GACpC,EAAa,CACf,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,GAEd,MACF,CACF,CAEA,AAJY,GAIR,CACF,IAAM,EAAW,MAAM,MAAM,MALS,UAKQ,CAC5C,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,eAAgB,CAClB,EACA,KAAM,KAAK,SAAS,CAAC,MAAE,EAAM,QAAS,CAAW,EACnD,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,EAAU,OAAO,EAAI,4BACvC,CAEA,EAAQ,IACR,EAAe,MACf,GACF,CAAE,MAAO,EAAU,CACjB,QAAQ,KAAK,CAAC,EAEhB,CACF,EAEM,EAAe,MAAO,IAE1B,GADA,EAAE,cAAc,GACZ,CAAC,EAAiB,OAEtB,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAI,CAAC,EAAO,OAEZ,IAAI,EAAiC,EAAgB,OAAO,CAE5D,GAAI,EAAa,CACf,IAAM,EAAW,IAAI,SACrB,EAAS,MAAM,CAAC,OAAQ,GAExB,GAAI,CACF,IAAM,EAAY,MAAM,MAAM,oBAAqB,CACjD,OAAQ,OACR,QAAS,CAAE,eAAgB,CAAM,EACjC,KAAM,CACR,GAEA,GAAI,CAAC,EAAU,EAAE,CAAE,MAAM,AAAI,MAAM,sBAEnC,GAAM,KAAE,CAAG,CAAE,CAAG,MAAM,EAAU,IAAI,GACpC,EAAa,CACf,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,GACd,MACF,CACF,CAEA,GAAI,CACF,IAAM,EAAW,MAAM,MAAM,CAAC,cAAc,EAAE,EAAgB,GAAG,CAAA,CAAE,CAAE,CACnE,OAAQ,MACR,QAAS,CACP,eAAgB,mBAChB,eAAgB,CAClB,EACA,KAAM,KAAK,SAAS,CAAC,MAAE,EAAM,QAAS,CAAW,EACnD,GAEA,GAAI,CAAC,EAAS,EAAE,CAAE,CAChB,IAAM,EAAY,MAAM,EAAS,IAAI,EACrC,OAAM,AAAI,MAAM,EAAU,OAAO,EAAI,4BACvC,CAEA,IAAM,EAAkB,MAAM,EAAS,IAAI,GAC3C,EAAc,EAAW,GAAG,CAAC,GAAK,EAAE,GAAG,GAAK,EAAgB,GAAG,CAAG,EAAkB,IACpF,EAAmB,MACnB,EAAQ,IACR,EAAe,KACjB,CAAE,MAAO,EAAK,CACZ,QAAQ,KAAK,CAAC,EAChB,CACF,EAQM,EAAe,MAAO,IAC1B,GAAI,OAAO,OAAO,CAAC,kDAAmD,CACpE,IAAM,EAAQ,aAAa,OAAO,CAAC,SACnC,GAAK,CAAD,CAIJ,GAAI,CAKF,CATU,EASN,CAAC,CAJO,MAAM,MAAM,CAAC,cAAc,EAAE,EAAA,CAAY,CAAE,CACrD,OAAQ,SACR,QAAS,CAAE,eAAgB,CAAM,CACnC,EAAA,EACS,EAAE,CACT,CADW,KACL,AAAI,MAAM,6BAElB,EAAc,EAAW,MAAM,CAAC,GAAK,EAAE,GAAG,GAAK,GACjD,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,2BAA4B,EAE5C,CACF,CACF,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,IAAA,EAAC,IAFgB,EAEhB,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,kBACnC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAc,UAAU,sBACtC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,gBACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAQ,EAAE,MAAM,CAAC,KAAK,EAC5E,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,gEAAgE,QAAQ,4BAAmB,qBAG5G,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,mBACH,KAAK,OACL,SAAU,EACV,UAAU,8IAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,0FAAiF,SACjH,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,QAAS,IAAM,EAAmB,MAAO,UAAU,0FAAiF,oBAOhK,EAEA,CAAA,EAAA,EAAA,IAAA,EAAC,KAFiB,CAEjB,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,IAAM,EAAoB,MAAO,UAAU,mFAA0E,uBACtI,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAiB,OAAO,EAAI,kCAAmC,IAAK,EAAiB,IAAI,CAAE,UAAU,2BAC/G,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAsB,EAAiB,IAAI,MAE3D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAQ,WAAY,EAAiB,GAAG,GACzC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAgB,WAAY,EAAiB,GAAG,SAOvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,8BAAqB,kBACnC,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,EAAU,UAAU,sBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,YAAY,gBACZ,MAAO,EACP,SAAU,AAAC,GAA2C,EAAQ,EAAE,MAAM,CAAC,KAAK,EAC5E,QAAQ,CAAA,CAAA,EACR,UAAU,2IAEZ,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,gEAAgE,QAAQ,4BAAmB,qBAG5G,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,GAAG,mBACH,KAAK,OACL,SAAU,EACV,UAAU,8IAGd,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,0FAAiF,uBAEnH,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBACX,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,IAAA,EAAC,KAAA,CAAsB,UAAU,oGAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,QAAS,IAAM,EAAoB,GAAW,UAAU,iEAC3D,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAS,OAAO,EAAI,iCAAkC,IAAK,EAAS,IAAI,CAAE,UAAU,2BAC9F,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAS,IAAI,MAEtB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,AAAC,IAAQ,EAAE,eAAe,GA9GrD,KACA,EAAQ,AA6G4D,EA7GnD,IAAI,EACrB,EAAe,EAFI,GA8G4D,EAAG,UAAU,8EAAqE,SACvJ,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,QAAS,AAAC,IAAQ,EAAE,eAAe,GAAI,EAAa,EAAS,GAAG,CAAG,EAAG,UAAU,uEAA8D,gBAPjJ,EAAS,GAAG,OAc/B,ID5Qe,CAAA,EAVf,AAUe,EAVf,CAAA,CAAA,OAUe,kBAAA,AAAkB,EARZ,AAQa,IAN9B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,gBAAgB,CAAA,UACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA"}